!function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],h=0,u=[];h<r.length;h++)o=r[h],n[o]&&u.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);u.length;)u.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={1:0},s=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;s.push([6,0]),i()}({6:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),s=i(5);const o=600,r=125,c=.4*r,l=.1*r;var d=class extends n.a.Component{constructor(e){super(e),this.state={logoLoaded:!1},this.canvas=n.a.createRef(),this.spectrum=new Uint8Array(e.fftSize/2),this.audioCtx=new AudioContext,this.processSound=this.processSound.bind(this),this.draw=this.draw.bind(this)}componentDidMount(){const e=this.props.fftSize;this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=e,this.analyser.smoothingTimeConstant=.6,this.processSound(this.props.soundStream),requestAnimationFrame(this.draw)}distributeAngles(e,t){return e/t*2*Math.PI+Math.PI/3}drawLogo(e,t){const i=o/2,a=r/2,n=c/4;[e=>{e.moveTo(i-c/3,a+c/2),e.lineTo(i+c/3,a+c/2)},e=>{e.moveTo(i,a+c/2),e.lineTo(i,a+c/3)},e=>{e.arc(i,a,c/3,0,Math.PI)},e=>{e.arc(i,a,n,0,Math.PI),e.moveTo(i+n,a-n),e.lineTo(i+n,a),e.arc(i,a-n,n,0,Math.PI,!0),e.moveTo(i-n,a-n),e.lineTo(i-n,a)}].forEach(t=>{e.beginPath(),t(e),e.stroke(),e.closePath()});const s=3*n,l=Math.floor(s*t);if(!(l<1))if(l<n){const t=(n-l)/n,s=Math.asin(t),o=Math.cos(s);e.beginPath(),e.arc(i,a,n,s,Math.PI-s),e.lineTo(i+o*n,a+t*n),e.closePath(),e.fill()}else if(l<2*n){const t=l-n;e.beginPath(),e.arc(i,a,n,0,Math.PI),e.lineTo(i-n,a-t),e.lineTo(i+n,a-t),e.lineTo(i+n,a),e.closePath(),e.fill()}else{const t=(n-(l-2*n))/n,s=Math.asin(t),o=Math.cos(s);e.beginPath(),e.arc(i,a,n,0,Math.PI),e.lineTo(i-n,a-n),e.arc(i,a-n,n,Math.PI,Math.PI+s),e.lineTo(i+o*n,a-n-t*n),e.arc(i,a-n,n,2*Math.PI-s,2*Math.PI),e.lineTo(i+n,a),e.closePath(),e.fill()}}draw(){if(this.analyser&&this.analyser.numberOfInputs>0){this.analyser.getByteFrequencyData(this.spectrum);const t=this.analyser.frequencyBinCount,i=this.canvas.current.getContext("2d");i.clearRect(0,0,o,r),i.fillStyle="#ff7f27",i.strokeStyle="#ff7f27",i.lineWidth=1.25;let a,n,s,d=0;for(var e=0;e<t;e++){d+=this.spectrum[e]*this.spectrum[e],a=this.spectrum[e]/256*l;const t=this.particles[e];n=o/2+Math.cos(t.angle)*(a+c),s=r/2+Math.sin(t.angle)*(a+c),i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(n,s),i.stroke(),i.closePath()}d/=t,d=Math.sqrt(d),d/=256,this.drawLogo(i,d)}requestAnimationFrame(this.draw)}componentWillReceiveProps(e){e.forceUpdater&&e.forceUpdater!==this.props.forceUpdater&&this.processSound(e.soundStream)}componentWillUnmount(){this.analyser&&this.analyser.numberOfInputs>0&&this.analyser.disconnect(),this.audioCtx&&this.audioCtx.close(),this.analyser=null,this.audioCtx=null}processSound(e){const t=this.analyser.frequencyBinCount;this.particles=Array(t).fill({}).map((e,i)=>{const a=this.distributeAngles(i,t/2);return{x:o/2+Math.cos(a)*c,y:r/2+Math.sin(a)*c,angle:a}}),this.audioCtx.createMediaStreamSource(e).connect(this.analyser)}render(){return n.a.createElement("canvas",{width:o,height:r,ref:this.canvas})}};function h(e){return new Promise(t=>{setTimeout(()=>t(),e)})}var u=function(e,t,i,a){return new(i||(i=Promise))(function(n,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,r)}c((a=a.apply(e,t||[])).next())})};const f={audio:!0,video:{width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};var m=class extends n.a.Component{constructor(e){super(e),this.state={devices:null,selectedMic:null,selectedCam:null,displayTestCam:!1,displayTestAudio:!1,audioStreamForceUpdate:1},this.testVideo=n.a.createRef(),this.testStreamVideo=null,this.changeConf=this.changeConf.bind(this),this.createDevices=this.createDevices.bind(this),this.changeTestVideoSource=this.changeTestVideoSource.bind(this),this.changeTestAudioSource=this.changeTestAudioSource.bind(this)}componentWillMount(){this.createDevices()}componentWillUnmount(){this.testStreamVideo&&this.testStreamVideo.getTracks().forEach(e=>e.stop()),this.testStreamAudio&&this.testStreamAudio.getTracks().forEach(e=>e.stop())}createDevices(){return u(this,void 0,void 0,function*(){if(navigator.mediaDevices.enumerateDevices){let e=null;try{e=yield navigator.mediaDevices.getUserMedia(f);const t=yield navigator.mediaDevices.enumerateDevices(),i={video:t.filter(e=>"videoinput"===e.kind),audio:t.filter(e=>"audioinput"===e.kind)},a=e.getTracks(),n=a.find(e=>"audio"===e.kind),s=i.audio.find(e=>e.label===n.label),o=s?s.deviceId:i.audio.length>0?i.audio[0].deviceId:null,r=a.find(e=>"video"===e.kind),c=i.video.find(e=>e.label===r.label),l=c?c.deviceId:i.video.length>0?i.video[0].deviceId:null;this.setState({devices:i,selectedMic:o,selectedCam:l},()=>this.changeConf())}catch(e){console.error(e)}finally{e&&e.getTracks().forEach(e=>e.stop())}}})}changeConf(){const{selectedCam:e,selectedMic:t}=this.state;this.changeTestAudioSource(t),this.changeTestVideoSource(e)}changeTestVideoSource(e){return u(this,void 0,void 0,function*(){const t=yield navigator.mediaDevices.getUserMedia({video:Object.assign({deviceId:e},f.video),audio:!1});yield h(500),this.testStreamVideo&&this.testStreamVideo.getTracks().forEach(e=>e.stop()),this.testStreamVideo=t,this.testVideo.current.srcObject=t,this.testVideo.current.play(),this.setState({displayTestCam:!0})})}changeTestAudioSource(e){return u(this,void 0,void 0,function*(){const t=yield navigator.mediaDevices.getUserMedia({video:!1,audio:{deviceId:e,sampleRate:{ideal:8e3}}});yield h(500),this.testStreamAudio&&this.testStreamAudio.getTracks().forEach(e=>e.stop()),this.testStreamAudio=t,this.setState({displayTestAudio:!0,audioStreamForceUpdate:this.state.audioStreamForceUpdate+1})})}render(){const{devices:e,selectedCam:t,selectedMic:i,displayTestAudio:a,displayTestCam:s}=this.state;return n.a.createElement("div",null,n.a.createElement("div",null,e&&e.video&&n.a.createElement("label",null,n.a.createElement("select",{value:t,onChange:e=>this.setState({selectedCam:e.target.value},()=>this.changeConf())},e.video.map(e=>n.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)))),n.a.createElement("video",{ref:this.testVideo,style:s?{}:{height:0},muted:!0}),e&&e.audio&&n.a.createElement("label",null,n.a.createElement("select",{value:i,onChange:e=>this.setState({selectedMic:e.target.value},()=>this.changeConf())},e.audio.map(e=>n.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)))),n.a.createElement("div",null,a&&n.a.createElement(d,{soundStream:this.testStreamAudio,fftSize:512,forceUpdater:this.state.audioStreamForceUpdate}))))}};i.n(s).a.render(n.a.createElement("div",{style:{width:"100vw",height:"100vh"}},n.a.createElement(m,null)),document.getElementById("root"))}});